(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{8171:function(e,t,a){Promise.resolve().then(a.bind(a,5445)),Promise.resolve().then(a.bind(a,1199))},1199:function(e,t,a){"use strict";a.d(t,{WeatherAdaptiveBackground:function(){return s}});var r=a(7437),o=a(2265);let n={id:"default",backgroundColor:"#0f172a",overlayColor:"rgba(15, 23, 42, 0.55)",image:"/backgrounds/clear-night.svg",textColor:"#f8fafc",description:"Aguardando dados meteorol\xf3gicos"},i={"clear-day":{id:"clear-day",backgroundColor:"#38bdf8",overlayColor:"rgba(14, 116, 144, 0.45)",image:"/backgrounds/clear-day.svg",textColor:"#082f49",description:"C\xe9u limpo"},"clear-night":{id:"clear-night",backgroundColor:"#111827",overlayColor:"rgba(15, 23, 42, 0.65)",image:"/backgrounds/clear-night.svg",textColor:"#e2e8f0",description:"Noite limpa"},cloudy:{id:"cloudy",backgroundColor:"#cbd5f5",overlayColor:"rgba(30, 64, 175, 0.35)",image:"/backgrounds/cloudy.svg",textColor:"#0f172a",description:"Nublado"},fog:{id:"fog",backgroundColor:"#cbd5f5",overlayColor:"rgba(71, 85, 105, 0.35)",image:"/backgrounds/fog.svg",textColor:"#0f172a",description:"Neblina"},rainy:{id:"rainy",backgroundColor:"#1e293b",overlayColor:"rgba(30, 64, 175, 0.55)",image:"/backgrounds/rainy.svg",textColor:"#e2e8f0",description:"Chuva"},snowy:{id:"snowy",backgroundColor:"#f8fafc",overlayColor:"rgba(59, 130, 246, 0.35)",image:"/backgrounds/snowy.svg",textColor:"#0f172a",description:"Neve"},storm:{id:"storm",backgroundColor:"#020617",overlayColor:"rgba(147, 197, 253, 0.25)",image:"/backgrounds/storm.svg",textColor:"#e0f2fe",description:"Tempestade"}};async function l(e,t){try{var a,r;let o=await fetch("https://nominatim.openstreetmap.org/reverse?format=json&lat=".concat(e,"&lon=").concat(t),{headers:{"User-Agent":"FlowGuiltPomodoro/1.0"}});if(!o.ok)throw Error("Falha ao buscar endere\xe7o");let n=await o.json(),i=n.address;if(!i)return null!==(a=n.display_name)&&void 0!==a?a:"Localiza\xe7\xe3o desconhecida";let l=i.city||i.town||i.village||i.municipality||i.state,s=i.country;if(l&&s)return"".concat(l,", ").concat(s);return null!==(r=n.display_name)&&void 0!==r?r:"Localiza\xe7\xe3o detectada"}catch(e){return console.error("Erro ao resolver cidade",e),"Localiza\xe7\xe3o desconhecida"}}function s(e){let{children:t}=e,[a,s]=(0,o.useState)(n),[c,d]=(0,o.useState)(null),[u,m]=(0,o.useState)(null);(0,o.useEffect)(()=>{let e=!1;if(!("geolocation"in navigator)){m("Geolocaliza\xe7\xe3o n\xe3o suportada no dispositivo");return}return navigator.geolocation.getCurrentPosition(async t=>{try{var a;let{latitude:r,longitude:o}=t.coords,n=await fetch("https://api.open-meteo.com/v1/forecast?latitude=".concat(r,"&longitude=").concat(o,"&current_weather=true&timezone=auto"));if(!n.ok)throw Error("Falha ao consultar previs\xe3o do tempo");let c=await n.json();if(!c.current_weather)throw Error("Resposta meteorol\xf3gica incompleta");let{temperature:u,weathercode:f,is_day:x}=c.current_weather,g=(a=1===x,[0].includes(f)?a?i["clear-day"]:i["clear-night"]:[1,2,3].includes(f)?a?i.cloudy:i["clear-night"]:[45,48].includes(f)?i.fog:[51,53,55,56,57,61,63,65,66,67,80,81,82].includes(f)?i.rainy:[71,73,75,77,85,86].includes(f)?i.snowy:[95,96,99].includes(f)?i.storm:a?i["clear-day"]:i["clear-night"]),[p]=await Promise.all([l(r,o)]);e||(s(g),d({cityLabel:p,temperature:u,description:0===f?"C\xe9u limpo":1===f?"Predominantemente limpo":2===f?"Parcialmente nublado":3===f?"Nublado":[45,48].includes(f)?"Neblina":[51,53,55].includes(f)?"Garoa":[56,57].includes(f)?"Garoa congelante":[61,63,65].includes(f)?"Chuva":[66,67].includes(f)?"Chuva congelante":[71,73,75,77,85,86].includes(f)?"Neve":[80,81,82].includes(f)?"Aguaceiros":[95,96,99].includes(f)?"Tempestade":"Condi\xe7\xe3o desconhecida"}),m(null))}catch(t){console.error(t),e||(m("N\xe3o foi poss\xedvel obter o clima da sua regi\xe3o"),s(n))}},e=>{console.error(e),m("Permita o acesso \xe0 localiza\xe7\xe3o para personalizar o tema")},{enableHighAccuracy:!1,timeout:1e4,maximumAge:36e5}),()=>{e=!0}},[]);let f=(0,o.useMemo)(()=>({backgroundColor:a.overlayColor}),[a.overlayColor]),x=(0,o.useMemo)(()=>({backgroundColor:a.backgroundColor,backgroundImage:"url(".concat(a.image,")"),backgroundPosition:"center",backgroundSize:"cover",color:a.textColor}),[a.backgroundColor,a.image,a.textColor]);return(0,r.jsx)("div",{className:"min-h-screen w-full bg-slate-950 text-slate-100 transition-colors duration-700 ease-out",style:x,children:(0,r.jsxs)("div",{className:"relative min-h-screen w-full",children:[(0,r.jsx)("div",{className:"absolute inset-0 pointer-events-none",style:f,"aria-hidden":!0}),(0,r.jsxs)("div",{className:"relative z-10 flex min-h-screen flex-col",children:[(0,r.jsx)("div",{className:"flex items-start justify-end px-6 pt-6",children:(0,r.jsx)("div",{className:"max-w-xs rounded-2xl border border-white/10 bg-black/30 px-4 py-3 text-right text-sm backdrop-blur-xl",style:{color:a.textColor},children:c?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{className:"font-semibold",children:c.cityLabel}),(0,r.jsxs)("p",{children:[c.description,null!=c.temperature&&(0,r.jsxs)("span",{className:"ml-2 font-medium",children:[c.temperature.toFixed(1),"\xb0C"]})]})]}):u?(0,r.jsx)("p",{className:"font-medium",children:u}):(0,r.jsx)("p",{className:"font-medium",children:"Personalizando experi\xeancia..."})})}),(0,r.jsx)("main",{className:"flex flex-1 items-center justify-center p-6",children:t})]})]})})}},5445:function(e,t,a){"use strict";a.d(t,{default:function(){return y}});var r=a(7437),o=a(2265);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];let r=[];return t.forEach(e=>(function e(t,a){if(t){if("string"==typeof t||"number"==typeof t){a.push(String(t));return}if(Array.isArray(t)){t.forEach(t=>e(t,a));return}Object.entries(t).forEach(e=>{let[t,r]=e;r&&a.push(t)})}})(e,r)),r.join(" ")}let i=o.forwardRef(function(e,t){let{className:a,...o}=e;return(0,r.jsx)("div",{ref:t,className:n("rounded-3xl border border-white/10 bg-[#111111]/80 shadow-[0_30px_60px_rgba(0,0,0,0.35)] backdrop-blur-xl",a),...o})}),l=o.forwardRef(function(e,t){let{className:a,...o}=e;return(0,r.jsx)("div",{ref:t,className:n("p-6 sm:p-8",a),...o})}),s=new Set(["INPUT","TEXTAREA","SELECT"]),c={"bright-beep":[{type:"square",frequency:880,duration:.5,attack:.005,decay:.12,sustain:.3,release:.18,gain:.35}],"soft-chime":[{type:"sine",frequency:523.25,duration:1.4,attack:.02,decay:.3,sustain:.35,release:.5,gain:.28},{type:"sine",frequency:659.25,duration:1.2,attack:.02,decay:.28,sustain:.3,release:.45,gain:.22,startOffset:.05},{type:"sine",frequency:783.99,duration:1.2,attack:.02,decay:.26,sustain:.25,release:.45,gain:.18,startOffset:.12}],"digital-click":[{type:"triangle",frequency:1500,duration:.2,attack:.002,decay:.05,sustain:.1,release:.08,gain:.3},{type:"square",frequency:2200,duration:.16,attack:.002,decay:.04,sustain:.08,release:.08,gain:.22,startOffset:.03}]},d=[{id:"bright-beep",label:"Bipe brilhante",description:"Alerta curto e n\xedtido para chamar aten\xe7\xe3o imediatamente."},{id:"soft-chime",label:"Sino suave",description:"Acorde gentil com harm\xf4nicos em cascata."},{id:"digital-click",label:"Clique digital",description:"Estalo eletr\xf4nico r\xe1pido e discreto."}];function u(e,t){let a=c[t];a&&a.forEach(t=>{!function(e,t){var a,r,o,n,i,l;let s=null!==(a=t.attack)&&void 0!==a?a:.01,c=null!==(r=t.decay)&&void 0!==r?r:.1,d=null!==(o=t.sustain)&&void 0!==o?o:.5,u=null!==(n=t.release)&&void 0!==n?n:.2,m=null!==(i=t.gain)&&void 0!==i?i:.3,f=e.currentTime+(null!==(l=t.startOffset)&&void 0!==l?l:0),x=f+t.duration,g=Math.max(f+s+c,x-u),p=m*d,b=e.createOscillator();b.type=t.type,b.frequency.setValueAtTime(t.frequency,f);let h=e.createGain();h.gain.setValueAtTime(0,e.currentTime),b.connect(h),h.connect(e.destination),h.gain.cancelScheduledValues(f),h.gain.setValueAtTime(1e-4,f),h.gain.exponentialRampToValueAtTime(Math.max(m,1e-4),f+s),h.gain.exponentialRampToValueAtTime(Math.max(p,1e-4),f+s+c),h.gain.setValueAtTime(Math.max(p,1e-4),g),h.gain.exponentialRampToValueAtTime(1e-4,x),b.start(f),b.stop(x+.05),b.onended=()=>{b.disconnect(),h.disconnect()}}(e,t)})}let m={primary:"bg-[#1DB954] text-black shadow-[0_0_20px_rgba(29,185,84,0.2)] hover:brightness-110 focus-visible:ring-[#1DB954]",secondary:"bg-[#232323] text-zinc-200 hover:brightness-110 focus-visible:ring-[#6C3BF4]"},f=o.forwardRef(function(e,t){var a;let{variant:o="primary",className:i,disabled:l,...s}=e,c=null!==(a=m[o])&&void 0!==a?a:m.primary;return(0,r.jsx)("button",{ref:t,"data-variant":o,className:n("inline-flex items-center justify-center rounded-md px-4 py-2 text-sm font-medium transition focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-offset-transparent",l?"cursor-not-allowed opacity-70":void 0,c,i),disabled:l,...s})});function x(e){let{running:t,onStartPause:a,onRestart:o}=e,i=t?"Pause":"Start";return(0,r.jsxs)("div",{className:"flex w-full flex-col items-stretch gap-3 sm:flex-row sm:items-center sm:justify-center",children:[(0,r.jsx)(f,{type:"button",onClick:a,className:n("w-full sm:w-auto",t?"bg-[#6C3BF4] text-white shadow-[0_0_30px_rgba(108,59,244,0.35)] focus-visible:ring-[#6C3BF4]":"bg-[#1DB954] text-black shadow-[0_0_30px_rgba(29,185,84,0.35)] focus-visible:ring-[#1DB954]"),"aria-label":"".concat(i," timer"),title:"Espa\xe7o: Start/Pause",children:i}),(0,r.jsx)(f,{type:"button",variant:"secondary",onClick:o,className:"w-full border border-white/5 bg-[#1A1A1A] text-zinc-200 hover:brightness-110 focus-visible:ring-[#6C3BF4] sm:w-auto","aria-label":"Restart timer",title:"R: Restart",children:"Restart"})]})}let g=[{mode:"pomodoro",label:"Pomodoro \xb7 25m"},{mode:"short",label:"Short Break \xb7 5m"},{mode:"long",label:"Long Break \xb7 15m"},{mode:"custom",label:"Custom"}];function p(e){let{mode:t,onSelect:a}=e;return(0,r.jsx)("div",{className:"grid grid-cols-1 gap-2 sm:grid-cols-2 md:flex md:flex-wrap",children:g.map(e=>{let o=e.mode===t;return(0,r.jsx)(f,{type:"button",variant:"secondary",onClick:()=>a(e.mode),"aria-pressed":o,"data-active":o,className:n("w-full md:flex-1 border border-white/5 bg-[#151515] text-zinc-200 transition-all duration-200 hover:brightness-110","data-[active=true]:border-[#1DB954]/40 data-[active=true]:bg-[#1DB954] data-[active=true]:text-black",o?"shadow-[0_0_25px_rgba(29,185,84,0.25)]":void 0),children:e.label},e.mode)})})}function b(e){let{selectedSoundId:t,onSelect:a,onPreview:o}=e;return(0,r.jsxs)("section",{className:"flex flex-col gap-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-sm font-medium text-zinc-300",children:"Som do alarme"}),(0,r.jsx)("p",{className:"text-xs text-zinc-500",children:"Escolha o som tocado automaticamente quando o tempo acabar."})]}),(0,r.jsx)("div",{className:"flex flex-col gap-2",children:d.map(e=>{let i=e.id===t;return(0,r.jsxs)("label",{className:n("group relative flex cursor-pointer items-start gap-3 rounded-xl border px-3 py-2 transition","border-white/5 bg-[#141414]/80 hover:border-[#6C3BF4]/40",i?"border-[#6C3BF4] bg-[#1a132d] shadow-[0_0_25px_rgba(108,59,244,0.3)]":void 0),children:[(0,r.jsx)("input",{type:"radio",name:"alarm-sound",value:e.id,checked:i,onChange:()=>a(e.id),className:"sr-only"}),(0,r.jsxs)("div",{className:"flex flex-1 flex-col gap-1",children:[(0,r.jsx)("span",{className:"text-sm font-semibold text-zinc-100",children:e.label}),(0,r.jsx)("span",{className:"text-xs text-zinc-500",children:e.description})]}),(0,r.jsx)(f,{type:"button",variant:"secondary",className:"px-3 py-1 text-xs font-medium text-zinc-200 border border-white/10 bg-[#1E1E1E]/80",onClick:t=>{t.preventDefault(),o(e.id)},children:"Testar"})]},e.id)})})]})}function h(e){let{seconds:t,total:a}=e,o=360*Math.min(1,Math.max(0,a>0?1-t/a:0));return(0,r.jsxs)("div",{className:"flex flex-col items-center gap-6",children:[(0,r.jsxs)("div",{className:"relative grid place-items-center rounded-full",style:{width:"clamp(200px, 70vw, 320px)",height:"clamp(200px, 70vw, 320px)"},"aria-label":"Tempo restante",children:[(0,r.jsx)("div",{"aria-hidden":!0,className:"absolute inset-0 rounded-full",style:{background:"conic-gradient(#1DB954 0deg ".concat(o,"deg, #6C3BF4 ").concat(o,"deg 360deg)"),filter:"drop-shadow(0 0 24px rgba(108,59,244,0.45))",transition:"background 0.3s ease"}}),(0,r.jsx)("div",{className:"absolute inset-[12px] rounded-full border border-white/10 bg-black/70","aria-hidden":!0}),(0,r.jsx)("div",{className:"relative text-4xl font-bold tabular-nums sm:text-5xl",role:"timer","aria-live":"polite",children:"".concat(String(Math.floor(t/60)).padStart(2,"0"),":").concat(String(t%60).padStart(2,"0"))})]}),(0,r.jsx)("p",{className:"text-xs text-zinc-400",children:"Espa\xe7o = Start/Pause \xb7 R = Restart"})]})}let v={pomodoro:1500,short:300,long:900};function y(){let[e,t]=(0,o.useState)("pomodoro"),[a,n]=(0,o.useState)(String(30)),[c,d]=(0,o.useState)("bright-beep"),[m,f]=(0,o.useState)(null),g=(0,o.useRef)(null),y=(0,o.useCallback)(async()=>{var e;let t=window,a=null!==(e=window.AudioContext)&&void 0!==e?e:t.webkitAudioContext;if(!a)return f("Seu navegador n\xe3o suporta reprodu\xe7\xe3o de \xe1udio."),null;if(!g.current)try{g.current=new a}catch(e){return console.error("N\xe3o foi poss\xedvel criar o contexto de \xe1udio.",e),f("N\xe3o foi poss\xedvel iniciar o \xe1udio neste navegador."),null}try{return"suspended"===g.current.state&&await g.current.resume(),f(null),g.current}catch(e){return console.warn("Reprodu\xe7\xe3o bloqueada at\xe9 intera\xe7\xe3o do usu\xe1rio.",e),f("O navegador bloqueou o \xe1udio. Interaja com a p\xe1gina e tente novamente."),null}},[]);(0,o.useEffect)(()=>()=>{let e=g.current;e&&"closed"!==e.state&&e.close().catch(()=>{})},[]);let w=(0,o.useMemo)(()=>{let e=Number(a);return!Number.isFinite(e)||e<=0?30:Math.max(1,Math.min(180,Math.floor(e)))},[a]),C=(0,o.useMemo)(()=>"custom"===e?60*w:v[e],[e,w]),{secondsLeft:k,isRunning:j,startPause:N,restart:S}=function(e){let{onComplete:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},[a,r]=(0,o.useState)(e),[n,i]=(0,o.useState)(!1),l=(0,o.useRef)(null),s=(0,o.useRef)(t);(0,o.useEffect)(()=>{s.current=t},[t]),(0,o.useEffect)(()=>{r(e),i(!1),l.current=null},[e]),(0,o.useEffect)(()=>{let e;if(!n){l.current=null;return}let t=a=>{if(null==l.current)l.current=a;else{let e=a-l.current;if(e>=1e3){let t=Math.floor(e/1e3);t>0&&(r(e=>Math.max(0,e-t)),l.current=a-e%1e3)}}e=window.requestAnimationFrame(t)};return e=window.requestAnimationFrame(t),()=>{window.cancelAnimationFrame(e)}},[n]),(0,o.useEffect)(()=>{0===a&&n&&(i(!1),s.current&&s.current())},[n,a]);let c=(0,o.useCallback)(()=>{i(t=>t||0!==a?!t:(r(e),l.current=null,!0))},[e,a]);return{secondsLeft:a,isRunning:n,startPause:c,restart:(0,o.useCallback)(()=>{r(e),i(!1),l.current=null},[e])}}(C,{onComplete:(0,o.useCallback)(()=>{(async()=>{let e=await y();e&&u(e,c)})()},[y,c])});!function(e){let{onRestart:t,onStartPause:a}=e;(0,o.useEffect)(()=>{let e=e=>{var r;let o=e.target,n=null!==(r=null==o?void 0:o.tagName)&&void 0!==r?r:"";if(!((null==o?void 0:o.isContentEditable)||s.has(n))){if("Space"===e.code){e.preventDefault(),a();return}"r"===e.key.toLowerCase()&&(e.preventDefault(),t())}};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[t,a])}({onRestart:S,onStartPause:N});let E=e=>{/^\d*$/.test(e)&&n(e)},_=(0,o.useCallback)(e=>{(async()=>{let t=await y();t&&u(t,e)})()},[y]);return(0,r.jsx)(i,{className:"w-full max-w-2xl text-[#f4f4f5]",children:(0,r.jsxs)(l,{className:"flex flex-col gap-6 sm:gap-8",children:[(0,r.jsxs)("header",{className:"flex flex-col gap-2 text-center sm:flex-row sm:items-center sm:justify-between sm:text-left",children:[(0,r.jsx)("h1",{className:"text-2xl font-semibold tracking-tight sm:text-3xl",children:"FlowGuilt Pomodoro"}),(0,r.jsx)("span",{className:"text-xs uppercase tracking-[0.18em] text-zinc-400 sm:text-sm",children:"Frontend only MVP"})]}),(0,r.jsx)(p,{mode:e,onSelect:t}),"custom"===e&&(0,r.jsxs)("div",{className:"flex flex-col gap-2 rounded-xl border border-white/5 bg-[#161616]/80 p-4 sm:flex-row sm:flex-wrap sm:items-end sm:gap-4",children:[(0,r.jsx)("label",{htmlFor:"customMinutes",className:"text-sm font-medium text-zinc-300",children:"Minutos personalizados"}),(0,r.jsx)("input",{id:"customMinutes",type:"text",inputMode:"numeric",pattern:"[0-9]*",min:1,max:180,value:a,onChange:e=>E(e.target.value),onBlur:()=>{n(String(w))},className:"w-full rounded-lg border border-white/10 bg-black/60 px-3 py-2 text-right text-lg font-semibold text-[#f4f4f5] shadow-inner transition focus:border-[#6C3BF4] focus:outline-none focus:ring-2 focus:ring-[#6C3BF4]/30 sm:w-28"}),(0,r.jsxs)("span",{className:"text-xs text-zinc-500",children:[1,"-",180," minutos"]})]}),(0,r.jsx)(b,{selectedSoundId:c,onSelect:d,onPreview:_}),m&&(0,r.jsx)("p",{className:"rounded-md border border-amber-500/40 bg-amber-500/10 px-3 py-2 text-xs text-amber-200",children:m}),(0,r.jsx)(h,{seconds:k,total:C}),(0,r.jsx)(x,{running:j,onStartPause:N,onRestart:S})]})})}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=8171)}),_N_E=e.O()}]);